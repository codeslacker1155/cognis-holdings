(function(){"use strict";var L={exports:{}};(function(P){var f=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},c=-1,_=1,o=0;f.Diff=function(r,n){return[r,n]},f.prototype.diff_main=function(r,n,e,s){typeof s>"u"&&(this.Diff_Timeout<=0?s=Number.MAX_VALUE:s=new Date().getTime()+this.Diff_Timeout*1e3);var t=s;if(r==null||n==null)throw new Error("Null input. (diff_main)");if(r==n)return r?[new f.Diff(o,r)]:[];typeof e>"u"&&(e=!0);var i=e,a=this.diff_commonPrefix(r,n),h=r.substring(0,a);r=r.substring(a),n=n.substring(a),a=this.diff_commonSuffix(r,n);var l=r.substring(r.length-a);r=r.substring(0,r.length-a),n=n.substring(0,n.length-a);var g=this.diff_compute_(r,n,i,t);return h&&g.unshift(new f.Diff(o,h)),l&&g.push(new f.Diff(o,l)),this.diff_cleanupMerge(g),g},f.prototype.diff_compute_=function(r,n,e,s){var t;if(!r)return[new f.Diff(_,n)];if(!n)return[new f.Diff(c,r)];var i=r.length>n.length?r:n,a=r.length>n.length?n:r,h=i.indexOf(a);if(h!=-1)return t=[new f.Diff(_,i.substring(0,h)),new f.Diff(o,a),new f.Diff(_,i.substring(h+a.length))],r.length>n.length&&(t[0][0]=t[2][0]=c),t;if(a.length==1)return[new f.Diff(c,r),new f.Diff(_,n)];var l=this.diff_halfMatch_(r,n);if(l){var g=l[0],u=l[1],v=l[2],b=l[3],m=l[4],p=this.diff_main(g,v,e,s),D=this.diff_main(u,b,e,s);return p.concat([new f.Diff(o,m)],D)}return e&&r.length>100&&n.length>100?this.diff_lineMode_(r,n,s):this.diff_bisect_(r,n,s)},f.prototype.diff_lineMode_=function(r,n,e){var s=this.diff_linesToChars_(r,n);r=s.chars1,n=s.chars2;var t=s.lineArray,i=this.diff_main(r,n,!1,e);this.diff_charsToLines_(i,t),this.diff_cleanupSemantic(i),i.push(new f.Diff(o,""));for(var a=0,h=0,l=0,g="",u="";a<i.length;){switch(i[a][0]){case _:l++,u+=i[a][1];break;case c:h++,g+=i[a][1];break;case o:if(h>=1&&l>=1){i.splice(a-h-l,h+l),a=a-h-l;for(var v=this.diff_main(g,u,!1,e),b=v.length-1;b>=0;b--)i.splice(a,0,v[b]);a=a+v.length}l=0,h=0,g="",u="";break}a++}return i.pop(),i},f.prototype.diff_bisect_=function(r,n,e){for(var s=r.length,t=n.length,i=Math.ceil((s+t)/2),a=i,h=2*i,l=new Array(h),g=new Array(h),u=0;u<h;u++)l[u]=-1,g[u]=-1;l[a+1]=0,g[a+1]=0;for(var v=s-t,b=v%2!=0,m=0,p=0,D=0,I=0,w=0;w<i&&!(new Date().getTime()>e);w++){for(var M=-w+m;M<=w-p;M+=2){var E=a+M,d;M==-w||M!=w&&l[E-1]<l[E+1]?d=l[E+1]:d=l[E-1]+1;for(var k=d-M;d<s&&k<t&&r.charAt(d)==n.charAt(k);)d++,k++;if(l[E]=d,d>s)p+=2;else if(k>t)m+=2;else if(b){var T=a+v-M;if(T>=0&&T<h&&g[T]!=-1){var F=s-g[T];if(d>=F)return this.diff_bisectSplit_(r,n,d,k,e)}}}for(var S=-w+D;S<=w-I;S+=2){var T=a+S,F;S==-w||S!=w&&g[T-1]<g[T+1]?F=g[T+1]:F=g[T-1]+1;for(var R=F-S;F<s&&R<t&&r.charAt(s-F-1)==n.charAt(t-R-1);)F++,R++;if(g[T]=F,F>s)I+=2;else if(R>t)D+=2;else if(!b){var E=a+v-S;if(E>=0&&E<h&&l[E]!=-1){var d=l[E],k=a+d-E;if(F=s-F,d>=F)return this.diff_bisectSplit_(r,n,d,k,e)}}}}return[new f.Diff(c,r),new f.Diff(_,n)]},f.prototype.diff_bisectSplit_=function(r,n,e,s,t){var i=r.substring(0,e),a=n.substring(0,s),h=r.substring(e),l=n.substring(s),g=this.diff_main(i,a,!1,t),u=this.diff_main(h,l,!1,t);return g.concat(u)},f.prototype.diff_linesToChars_=function(r,n){var e=[],s={};e[0]="";function t(l){for(var g="",u=0,v=-1,b=e.length;v<l.length-1;){v=l.indexOf(`
`,u),v==-1&&(v=l.length-1);var m=l.substring(u,v+1);(s.hasOwnProperty?s.hasOwnProperty(m):s[m]!==void 0)?g+=String.fromCharCode(s[m]):(b==i&&(m=l.substring(u),v=l.length),g+=String.fromCharCode(b),s[m]=b,e[b++]=m),u=v+1}return g}var i=4e4,a=t(r);i=65535;var h=t(n);return{chars1:a,chars2:h,lineArray:e}},f.prototype.diff_charsToLines_=function(r,n){for(var e=0;e<r.length;e++){for(var s=r[e][1],t=[],i=0;i<s.length;i++)t[i]=n[s.charCodeAt(i)];r[e][1]=t.join("")}},f.prototype.diff_commonPrefix=function(r,n){if(!r||!n||r.charAt(0)!=n.charAt(0))return 0;for(var e=0,s=Math.min(r.length,n.length),t=s,i=0;e<t;)r.substring(i,t)==n.substring(i,t)?(e=t,i=e):s=t,t=Math.floor((s-e)/2+e);return t},f.prototype.diff_commonSuffix=function(r,n){if(!r||!n||r.charAt(r.length-1)!=n.charAt(n.length-1))return 0;for(var e=0,s=Math.min(r.length,n.length),t=s,i=0;e<t;)r.substring(r.length-t,r.length-i)==n.substring(n.length-t,n.length-i)?(e=t,i=e):s=t,t=Math.floor((s-e)/2+e);return t},f.prototype.diff_commonOverlap_=function(r,n){var e=r.length,s=n.length;if(e==0||s==0)return 0;e>s?r=r.substring(e-s):e<s&&(n=n.substring(0,e));var t=Math.min(e,s);if(r==n)return t;for(var i=0,a=1;;){var h=r.substring(t-a),l=n.indexOf(h);if(l==-1)return i;a+=l,(l==0||r.substring(t-a)==n.substring(0,a))&&(i=a,a++)}},f.prototype.diff_halfMatch_=function(r,n){if(this.Diff_Timeout<=0)return null;var e=r.length>n.length?r:n,s=r.length>n.length?n:r;if(e.length<4||s.length*2<e.length)return null;var t=this;function i(p,D,I){for(var w=p.substring(I,I+Math.floor(p.length/4)),M=-1,E="",d,k,T,F;(M=D.indexOf(w,M+1))!=-1;){var S=t.diff_commonPrefix(p.substring(I),D.substring(M)),R=t.diff_commonSuffix(p.substring(0,I),D.substring(0,M));E.length<R+S&&(E=D.substring(M-R,M)+D.substring(M,M+S),d=p.substring(0,I-R),k=p.substring(I+S),T=D.substring(0,M-R),F=D.substring(M+S))}return E.length*2>=p.length?[d,k,T,F,E]:null}var a=i(e,s,Math.ceil(e.length/4)),h=i(e,s,Math.ceil(e.length/2)),l;if(!a&&!h)return null;h?a?l=a[4].length>h[4].length?a:h:l=h:l=a;var g,u,v,b;r.length>n.length?(g=l[0],u=l[1],v=l[2],b=l[3]):(v=l[0],b=l[1],g=l[2],u=l[3]);var m=l[4];return[g,u,v,b,m]},f.prototype.diff_cleanupSemantic=function(r){for(var n=!1,e=[],s=0,t=null,i=0,a=0,h=0,l=0,g=0;i<r.length;)r[i][0]==o?(e[s++]=i,a=l,h=g,l=0,g=0,t=r[i][1]):(r[i][0]==_?l+=r[i][1].length:g+=r[i][1].length,t&&t.length<=Math.max(a,h)&&t.length<=Math.max(l,g)&&(r.splice(e[s-1],0,new f.Diff(c,t)),r[e[s-1]+1][0]=_,s--,s--,i=s>0?e[s-1]:-1,a=0,h=0,l=0,g=0,t=null,n=!0)),i++;for(n&&this.diff_cleanupMerge(r),this.diff_cleanupSemanticLossless(r),i=1;i<r.length;){if(r[i-1][0]==c&&r[i][0]==_){var u=r[i-1][1],v=r[i][1],b=this.diff_commonOverlap_(u,v),m=this.diff_commonOverlap_(v,u);b>=m?(b>=u.length/2||b>=v.length/2)&&(r.splice(i,0,new f.Diff(o,v.substring(0,b))),r[i-1][1]=u.substring(0,u.length-b),r[i+1][1]=v.substring(b),i++):(m>=u.length/2||m>=v.length/2)&&(r.splice(i,0,new f.Diff(o,u.substring(0,m))),r[i-1][0]=_,r[i-1][1]=v.substring(0,v.length-m),r[i+1][0]=c,r[i+1][1]=u.substring(m),i++),i++}i++}},f.prototype.diff_cleanupSemanticLossless=function(r){function n(m,p){if(!m||!p)return 6;var D=m.charAt(m.length-1),I=p.charAt(0),w=D.match(f.nonAlphaNumericRegex_),M=I.match(f.nonAlphaNumericRegex_),E=w&&D.match(f.whitespaceRegex_),d=M&&I.match(f.whitespaceRegex_),k=E&&D.match(f.linebreakRegex_),T=d&&I.match(f.linebreakRegex_),F=k&&m.match(f.blanklineEndRegex_),S=T&&p.match(f.blanklineStartRegex_);return F||S?5:k||T?4:w&&!E&&d?3:E||d?2:w||M?1:0}for(var e=1;e<r.length-1;){if(r[e-1][0]==o&&r[e+1][0]==o){var s=r[e-1][1],t=r[e][1],i=r[e+1][1],a=this.diff_commonSuffix(s,t);if(a){var h=t.substring(t.length-a);s=s.substring(0,s.length-a),t=h+t.substring(0,t.length-a),i=h+i}for(var l=s,g=t,u=i,v=n(s,t)+n(t,i);t.charAt(0)===i.charAt(0);){s+=t.charAt(0),t=t.substring(1)+i.charAt(0),i=i.substring(1);var b=n(s,t)+n(t,i);b>=v&&(v=b,l=s,g=t,u=i)}r[e-1][1]!=l&&(l?r[e-1][1]=l:(r.splice(e-1,1),e--),r[e][1]=g,u?r[e+1][1]=u:(r.splice(e+1,1),e--))}e++}},f.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,f.whitespaceRegex_=/\s/,f.linebreakRegex_=/[\r\n]/,f.blanklineEndRegex_=/\n\r?\n$/,f.blanklineStartRegex_=/^\r?\n\r?\n/,f.prototype.diff_cleanupEfficiency=function(r){for(var n=!1,e=[],s=0,t=null,i=0,a=!1,h=!1,l=!1,g=!1;i<r.length;)r[i][0]==o?(r[i][1].length<this.Diff_EditCost&&(l||g)?(e[s++]=i,a=l,h=g,t=r[i][1]):(s=0,t=null),l=g=!1):(r[i][0]==c?g=!0:l=!0,t&&(a&&h&&l&&g||t.length<this.Diff_EditCost/2&&a+h+l+g==3)&&(r.splice(e[s-1],0,new f.Diff(c,t)),r[e[s-1]+1][0]=_,s--,t=null,a&&h?(l=g=!0,s=0):(s--,i=s>0?e[s-1]:-1,l=g=!1),n=!0)),i++;n&&this.diff_cleanupMerge(r)},f.prototype.diff_cleanupMerge=function(r){r.push(new f.Diff(o,""));for(var n=0,e=0,s=0,t="",i="",a;n<r.length;)switch(r[n][0]){case _:s++,i+=r[n][1],n++;break;case c:e++,t+=r[n][1],n++;break;case o:e+s>1?(e!==0&&s!==0&&(a=this.diff_commonPrefix(i,t),a!==0&&(n-e-s>0&&r[n-e-s-1][0]==o?r[n-e-s-1][1]+=i.substring(0,a):(r.splice(0,0,new f.Diff(o,i.substring(0,a))),n++),i=i.substring(a),t=t.substring(a)),a=this.diff_commonSuffix(i,t),a!==0&&(r[n][1]=i.substring(i.length-a)+r[n][1],i=i.substring(0,i.length-a),t=t.substring(0,t.length-a))),n-=e+s,r.splice(n,e+s),t.length&&(r.splice(n,0,new f.Diff(c,t)),n++),i.length&&(r.splice(n,0,new f.Diff(_,i)),n++),n++):n!==0&&r[n-1][0]==o?(r[n-1][1]+=r[n][1],r.splice(n,1)):n++,s=0,e=0,t="",i="";break}r[r.length-1][1]===""&&r.pop();var h=!1;for(n=1;n<r.length-1;)r[n-1][0]==o&&r[n+1][0]==o&&(r[n][1].substring(r[n][1].length-r[n-1][1].length)==r[n-1][1]?(r[n][1]=r[n-1][1]+r[n][1].substring(0,r[n][1].length-r[n-1][1].length),r[n+1][1]=r[n-1][1]+r[n+1][1],r.splice(n-1,1),h=!0):r[n][1].substring(0,r[n+1][1].length)==r[n+1][1]&&(r[n-1][1]+=r[n+1][1],r[n][1]=r[n][1].substring(r[n+1][1].length)+r[n+1][1],r.splice(n+1,1),h=!0)),n++;h&&this.diff_cleanupMerge(r)},f.prototype.diff_xIndex=function(r,n){var e=0,s=0,t=0,i=0,a;for(a=0;a<r.length&&(r[a][0]!==_&&(e+=r[a][1].length),r[a][0]!==c&&(s+=r[a][1].length),!(e>n));a++)t=e,i=s;return r.length!=a&&r[a][0]===c?i:i+(n-t)},f.prototype.diff_prettyHtml=function(r){for(var n=[],e=/&/g,s=/</g,t=/>/g,i=/\n/g,a=0;a<r.length;a++){var h=r[a][0],l=r[a][1],g=l.replace(e,"&amp;").replace(s,"&lt;").replace(t,"&gt;").replace(i,"&para;<br>");switch(h){case _:n[a]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case c:n[a]='<del style="background:#ffe6e6;">'+g+"</del>";break;case o:n[a]="<span>"+g+"</span>";break}}return n.join("")},f.prototype.diff_text1=function(r){for(var n=[],e=0;e<r.length;e++)r[e][0]!==_&&(n[e]=r[e][1]);return n.join("")},f.prototype.diff_text2=function(r){for(var n=[],e=0;e<r.length;e++)r[e][0]!==c&&(n[e]=r[e][1]);return n.join("")},f.prototype.diff_levenshtein=function(r){for(var n=0,e=0,s=0,t=0;t<r.length;t++){var i=r[t][0],a=r[t][1];switch(i){case _:e+=a.length;break;case c:s+=a.length;break;case o:n+=Math.max(e,s),e=0,s=0;break}}return n+=Math.max(e,s),n},f.prototype.diff_toDelta=function(r){for(var n=[],e=0;e<r.length;e++)switch(r[e][0]){case _:n[e]="+"+encodeURI(r[e][1]);break;case c:n[e]="-"+r[e][1].length;break;case o:n[e]="="+r[e][1].length;break}return n.join("	").replace(/%20/g," ")},f.prototype.diff_fromDelta=function(r,n){for(var e=[],s=0,t=0,i=n.split(/\t/g),a=0;a<i.length;a++){var h=i[a].substring(1);switch(i[a].charAt(0)){case"+":try{e[s++]=new f.Diff(_,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var l=parseInt(h,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+h);var g=r.substring(t,t+=l);i[a].charAt(0)=="="?e[s++]=new f.Diff(o,g):e[s++]=new f.Diff(c,g);break;default:if(i[a])throw new Error("Invalid diff operation in diff_fromDelta: "+i[a])}}if(t!=r.length)throw new Error("Delta length ("+t+") does not equal source text length ("+r.length+").");return e},f.prototype.match_main=function(r,n,e){if(r==null||n==null||e==null)throw new Error("Null input. (match_main)");return e=Math.max(0,Math.min(e,r.length)),r==n?0:r.length?r.substring(e,e+n.length)==n?e:this.match_bitap_(r,n,e):-1},f.prototype.match_bitap_=function(r,n,e){if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var s=this.match_alphabet_(n),t=this;function i(d,k){var T=d/n.length,F=Math.abs(e-k);return t.Match_Distance?T+F/t.Match_Distance:F?1:T}var a=this.Match_Threshold,h=r.indexOf(n,e);h!=-1&&(a=Math.min(i(0,h),a),h=r.lastIndexOf(n,e+n.length),h!=-1&&(a=Math.min(i(0,h),a)));var l=1<<n.length-1;h=-1;for(var g,u,v=n.length+r.length,b,m=0;m<n.length;m++){for(g=0,u=v;g<u;)i(m,e+u)<=a?g=u:v=u,u=Math.floor((v-g)/2+g);v=u;var p=Math.max(1,e-u+1),D=Math.min(e+u,r.length)+n.length,I=Array(D+2);I[D+1]=(1<<m)-1;for(var w=D;w>=p;w--){var M=s[r.charAt(w-1)];if(m===0?I[w]=(I[w+1]<<1|1)&M:I[w]=(I[w+1]<<1|1)&M|((b[w+1]|b[w])<<1|1)|b[w+1],I[w]&l){var E=i(m,w-1);if(E<=a)if(a=E,h=w-1,h>e)p=Math.max(1,2*e-h);else break}}if(i(m+1,e)>a)break;b=I}return h},f.prototype.match_alphabet_=function(r){for(var n={},e=0;e<r.length;e++)n[r.charAt(e)]=0;for(var e=0;e<r.length;e++)n[r.charAt(e)]|=1<<r.length-e-1;return n},f.prototype.patch_addContext_=function(r,n){if(n.length!=0){if(r.start2===null)throw Error("patch not initialized");for(var e=n.substring(r.start2,r.start2+r.length1),s=0;n.indexOf(e)!=n.lastIndexOf(e)&&e.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)s+=this.Patch_Margin,e=n.substring(r.start2-s,r.start2+r.length1+s);s+=this.Patch_Margin;var t=n.substring(r.start2-s,r.start2);t&&r.diffs.unshift(new f.Diff(o,t));var i=n.substring(r.start2+r.length1,r.start2+r.length1+s);i&&r.diffs.push(new f.Diff(o,i)),r.start1-=t.length,r.start2-=t.length,r.length1+=t.length+i.length,r.length2+=t.length+i.length}},f.prototype.patch_make=function(r,n,e){var s,t;if(typeof r=="string"&&typeof n=="string"&&typeof e>"u")s=r,t=this.diff_main(s,n,!0),t.length>2&&(this.diff_cleanupSemantic(t),this.diff_cleanupEfficiency(t));else if(r&&typeof r=="object"&&typeof n>"u"&&typeof e>"u")t=r,s=this.diff_text1(t);else if(typeof r=="string"&&n&&typeof n=="object"&&typeof e>"u")s=r,t=n;else if(typeof r=="string"&&typeof n=="string"&&e&&typeof e=="object")s=r,t=e;else throw new Error("Unknown call format to patch_make.");if(t.length===0)return[];for(var i=[],a=new f.patch_obj,h=0,l=0,g=0,u=s,v=s,b=0;b<t.length;b++){var m=t[b][0],p=t[b][1];switch(!h&&m!==o&&(a.start1=l,a.start2=g),m){case _:a.diffs[h++]=t[b],a.length2+=p.length,v=v.substring(0,g)+p+v.substring(g);break;case c:a.length1+=p.length,a.diffs[h++]=t[b],v=v.substring(0,g)+v.substring(g+p.length);break;case o:p.length<=2*this.Patch_Margin&&h&&t.length!=b+1?(a.diffs[h++]=t[b],a.length1+=p.length,a.length2+=p.length):p.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(a,u),i.push(a),a=new f.patch_obj,h=0,u=v,l=g);break}m!==_&&(l+=p.length),m!==c&&(g+=p.length)}return h&&(this.patch_addContext_(a,u),i.push(a)),i},f.prototype.patch_deepCopy=function(r){for(var n=[],e=0;e<r.length;e++){var s=r[e],t=new f.patch_obj;t.diffs=[];for(var i=0;i<s.diffs.length;i++)t.diffs[i]=new f.Diff(s.diffs[i][0],s.diffs[i][1]);t.start1=s.start1,t.start2=s.start2,t.length1=s.length1,t.length2=s.length2,n[e]=t}return n},f.prototype.patch_apply=function(r,n){if(r.length==0)return[n,[]];r=this.patch_deepCopy(r);var e=this.patch_addPadding(r);n=e+n+e,this.patch_splitMax(r);for(var s=0,t=[],i=0;i<r.length;i++){var a=r[i].start2+s,h=this.diff_text1(r[i].diffs),l,g=-1;if(h.length>this.Match_MaxBits?(l=this.match_main(n,h.substring(0,this.Match_MaxBits),a),l!=-1&&(g=this.match_main(n,h.substring(h.length-this.Match_MaxBits),a+h.length-this.Match_MaxBits),(g==-1||l>=g)&&(l=-1))):l=this.match_main(n,h,a),l==-1)t[i]=!1,s-=r[i].length2-r[i].length1;else{t[i]=!0,s=l-a;var u;if(g==-1?u=n.substring(l,l+h.length):u=n.substring(l,g+this.Match_MaxBits),h==u)n=n.substring(0,l)+this.diff_text2(r[i].diffs)+n.substring(l+h.length);else{var v=this.diff_main(h,u,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(v)/h.length>this.Patch_DeleteThreshold)t[i]=!1;else{this.diff_cleanupSemanticLossless(v);for(var b=0,m,p=0;p<r[i].diffs.length;p++){var D=r[i].diffs[p];D[0]!==o&&(m=this.diff_xIndex(v,b)),D[0]===_?n=n.substring(0,l+m)+D[1]+n.substring(l+m):D[0]===c&&(n=n.substring(0,l+m)+n.substring(l+this.diff_xIndex(v,b+D[1].length))),D[0]!==c&&(b+=D[1].length)}}}}}return n=n.substring(e.length,n.length-e.length),[n,t]},f.prototype.patch_addPadding=function(r){for(var n=this.Patch_Margin,e="",s=1;s<=n;s++)e+=String.fromCharCode(s);for(var s=0;s<r.length;s++)r[s].start1+=n,r[s].start2+=n;var t=r[0],i=t.diffs;if(i.length==0||i[0][0]!=o)i.unshift(new f.Diff(o,e)),t.start1-=n,t.start2-=n,t.length1+=n,t.length2+=n;else if(n>i[0][1].length){var a=n-i[0][1].length;i[0][1]=e.substring(i[0][1].length)+i[0][1],t.start1-=a,t.start2-=a,t.length1+=a,t.length2+=a}if(t=r[r.length-1],i=t.diffs,i.length==0||i[i.length-1][0]!=o)i.push(new f.Diff(o,e)),t.length1+=n,t.length2+=n;else if(n>i[i.length-1][1].length){var a=n-i[i.length-1][1].length;i[i.length-1][1]+=e.substring(0,a),t.length1+=a,t.length2+=a}return e},f.prototype.patch_splitMax=function(r){for(var n=this.Match_MaxBits,e=0;e<r.length;e++)if(!(r[e].length1<=n)){var s=r[e];r.splice(e--,1);for(var t=s.start1,i=s.start2,a="";s.diffs.length!==0;){var h=new f.patch_obj,l=!0;for(h.start1=t-a.length,h.start2=i-a.length,a!==""&&(h.length1=h.length2=a.length,h.diffs.push(new f.Diff(o,a)));s.diffs.length!==0&&h.length1<n-this.Patch_Margin;){var g=s.diffs[0][0],u=s.diffs[0][1];g===_?(h.length2+=u.length,i+=u.length,h.diffs.push(s.diffs.shift()),l=!1):g===c&&h.diffs.length==1&&h.diffs[0][0]==o&&u.length>2*n?(h.length1+=u.length,t+=u.length,l=!1,h.diffs.push(new f.Diff(g,u)),s.diffs.shift()):(u=u.substring(0,n-h.length1-this.Patch_Margin),h.length1+=u.length,t+=u.length,g===o?(h.length2+=u.length,i+=u.length):l=!1,h.diffs.push(new f.Diff(g,u)),u==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(u.length))}a=this.diff_text2(h.diffs),a=a.substring(a.length-this.Patch_Margin);var v=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);v!==""&&(h.length1+=v.length,h.length2+=v.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===o?h.diffs[h.diffs.length-1][1]+=v:h.diffs.push(new f.Diff(o,v))),l||r.splice(++e,0,h)}}},f.prototype.patch_toText=function(r){for(var n=[],e=0;e<r.length;e++)n[e]=r[e];return n.join("")},f.prototype.patch_fromText=function(r){var n=[];if(!r)return n;for(var e=r.split(`
`),s=0,t=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<e.length;){var i=e[s].match(t);if(!i)throw new Error("Invalid patch string: "+e[s]);var a=new f.patch_obj;for(n.push(a),a.start1=parseInt(i[1],10),i[2]===""?(a.start1--,a.length1=1):i[2]=="0"?a.length1=0:(a.start1--,a.length1=parseInt(i[2],10)),a.start2=parseInt(i[3],10),i[4]===""?(a.start2--,a.length2=1):i[4]=="0"?a.length2=0:(a.start2--,a.length2=parseInt(i[4],10)),s++;s<e.length;){var h=e[s].charAt(0);try{var l=decodeURI(e[s].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+l)}if(h=="-")a.diffs.push(new f.Diff(c,l));else if(h=="+")a.diffs.push(new f.Diff(_,l));else if(h==" ")a.diffs.push(new f.Diff(o,l));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+l)}s++}}return n},f.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},f.patch_obj.prototype.toString=function(){var r,n;this.length1===0?r=this.start1+",0":this.length1==1?r=this.start1+1:r=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2==1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var e=["@@ -"+r+" +"+n+` @@
`],s,t=0;t<this.diffs.length;t++){switch(this.diffs[t][0]){case _:s="+";break;case c:s="-";break;case o:s=" ";break}e[t+1]=s+encodeURI(this.diffs[t][1])+`
`}return e.join("").replace(/%20/g," ")},P.exports=f,P.exports.diff_match_patch=f,P.exports.DIFF_DELETE=c,P.exports.DIFF_INSERT=_,P.exports.DIFF_EQUAL=o})(L);var A=L.exports;const y=[A.diff_match_patch.DIFF_DELETE,A.diff_match_patch.DIFF_EQUAL],N=[A.diff_match_patch.DIFF_INSERT,A.diff_match_patch.DIFF_EQUAL];self.onmessage=P=>{const{id:f,from:c,to:_}=P.data,o=C(c,_),r=O(o),n={id:f,result:r};self.postMessage(n)};function C(P,f){const c=new A.diff_match_patch,_=c.diff_main(P,f);return c.diff_cleanupSemantic(_),_}function O(P){const f=[];let c,_;const o=(n,e)=>{switch(n){case A.diff_match_patch.DIFF_INSERT:f.push(`${e} // [!code ++]`);break;case A.diff_match_patch.DIFF_DELETE:f.push(`${e} // [!code --]`);break;default:f.push(e)}};return P.forEach(n=>{const[e,s]=n;if(s===`
`)return _&&o(A.diff_match_patch.DIFF_DELETE,_),c&&o(A.diff_match_patch.DIFF_INSERT,c),o(e,"");const t=s.split(`
`),i=t.length-1;if(t.length===1){if(!c&&!_){const[a]=t;c=a,_=a}_&&e===A.diff_match_patch.DIFF_DELETE&&(_+=t[0]),c&&e===A.diff_match_patch.DIFF_INSERT&&(c+=t[0]);return}t.forEach((a,h)=>{if(h===0){!c&&!_&&o(e,a),_&&y.includes(e)&&(o(A.diff_match_patch.DIFF_DELETE,_+a),_=void 0),c&&N.includes(e)&&(o(A.diff_match_patch.DIFF_INSERT,c+a),c=void 0);return}if(h===i){const l=!a.trim().length;if(!c&&!_&&l)return;if(l){_&&y.includes(e)&&(o(e,_+a),_=void 0),c&&N.includes(e)&&(o(e,c+a),c=void 0);return}switch(e){case A.diff_match_patch.DIFF_INSERT:c=(c??"")+a;break;case A.diff_match_patch.DIFF_DELETE:_=(_??"")+a;break;default:_=(_??"")+a,c=(c??"")+a;break}}if(!c&&!_){o(A.diff_match_patch.DIFF_EQUAL,a);return}!c&&e===A.diff_match_patch.DIFF_INSERT&&o(A.diff_match_patch.DIFF_INSERT,a),!_&&e===A.diff_match_patch.DIFF_DELETE&&o(A.diff_match_patch.DIFF_DELETE,a)})}),f.join(`
`)}})();
